#### Context Free Grammars
Ex) Let $G_1$ be the CFG
$$
\begin{align}
	\mathtt{A} &\rightarrow \mathtt{0A1 | B} \\
	\mathtt{B} &\rightarrow \mathtt{\#}
\end{align}
$$
$$
\begin{align}
	\mathtt{<EXPR>} &\rightarrow \mathtt{<TERM>|<EXPR>+<TERM>|<EXPR-<TERM>} \\
	\mathtt{<TERM>} &\rightarrow \mathtt{<FACTOR> | <TERM * <FACTOR> | <TERM> / <FACTOR>} \\
	\mathtt{<FACTOR>} &\rightarrow \mathtt{<POWER> | -<FACTOR>} \\
	\mathtt{<POWER>} &\rightarrow \mathtt{<ATOM> | <ATOM> ** <FACTOR>} \\
	\mathtt{<ATOM>} &\rightarrow \mathtt{<LITERAL>|(<EXPR>)} \\
	\mathtt{<LITERAL>} &\rightarrow \mathtt{<DIGIT> | <DIGIT><LITERAL>} \\
	\mathtt{<DIGIT>} &\rightarrow \mathtt{0|1|2|3|4|5|6|7|8|9}

\end{align}
	
$$

123 derived from

$$
\begin{align}
\mathtt{<EXPR>} \Longrightarrow \mathtt{<TERM>} \Longrightarrow \mathtt{<FACTOR>} \Longrightarrow \mathtt{<POWER>}
\end{align}
$$
```python
<EXPR>
<TERM>
<FACTOR>
<POWER>
<ATOM>
<LITERAL>
<DIGIT><LITERAL>
<DIGIT><DIGIT><LITERAL>
<DIGIT><DIGIT><DIGIT>
123
```




ex)
```
E -> T | E + T
T -> F | T * F
F -> a | (E)
```
claim: a + a * a is in CFG

```
E
E + T

```


Def:
Any language that can be generated by a context free grammar (CFG) is called a context free language (CFL)

Ex)
$\{O^n\#1^n|n\ge0\}$ is context free, but not regular


Ex) A CFG $G_1$ given by $\mathtt{S} \rightarrow \mathtt{aSb|SS|\epsilon}$
$$
\mathtt{S} \Rightarrow \mathtt{aSb} \Rightarrow \mathtt{ab}
$$
SO, ab exists in G_1, but does not exist in G_!

$G_1$ Is all properly nested pairs of a's and b's

A similar language would be $\mathtt{S} \rightarrow \mathtt{(S)|[S]|\{S\}|SS|\epsilon}$ 

Ex)
Construct a CFG to generate $\{0^n1^n|n\ge0\}\cup\{1^n0^n|n\ge0\}$

Grammar for $\{0^n1^n|n\ge0\}$
$$
\begin{align}
	\mathtt{B} &\rightarrow \mathtt{0B1|\epsilon}
\end{align}
$$
Grammar for $\{1^n0^n|n\ge0\}$
$$
\begin{align}
	\mathtt{C} &\rightarrow \mathtt{1C0|\epsilon}
\end{align}
$$
Grammar for $\{0^n1^n|n\ge0\}\cup\{1^n0^n|n\ge0\}$
$$
\begin{align}
	\mathtt{A} &\rightarrow \mathtt{B|C}\\
	\mathtt{B} &\rightarrow \mathtt{0B1|\epsilon}\\
	\mathtt{C} &\rightarrow \mathtt{1C0|\epsilon}
\end{align}
$$


DEF:
	A CFG is in Chomsky normal form is every rule is of the form $A \rightarrow BC$ or $A\rightarrow a$
	Where a is any terminal and A,B, and C are any variables - except that B and C may not be the start variable. In addition we permit the rule $S\rightarrow \epsilon$, where S is the start variable.

*Can only be a Variable -> 2 Variables, or Variable -> terminal or start variable -> $\epsilon$*


THEOREM:
	Any CFL is generated by a CFG in Chomsky normal form.



*Chomsky normal form makes it easier to count substitutions*
Goal is not to be very useful, it is mostly for finding out how many sub

Proof Idea:
	1. Add a new start variable 
	2. Eliminate all $\epsilon$ rules
	3. Eliminate all "unit" rules if the form $\mathtt{A}\rightarrow\mathtt{B}$
	4. Convert all other rules



1.
$$
\begin{align}
	\mathtt{S} &\rightarrow \mathtt{A}\\
	\mathtt{A} &\rightarrow \mathtt{B|C}\\
	\mathtt{B} &\rightarrow \mathtt{0B1|\epsilon}\\
	\mathtt{C} &\rightarrow \mathtt{1C0|\epsilon}
\end{align}
$$

2.
$$
\begin{align}
	\mathtt{S} &\rightarrow \mathtt{A}\\
	\mathtt{A} &\rightarrow \mathtt{B|C|\epsilon}\\
	\mathtt{B} &\rightarrow \mathtt{0B1|\epsilon}\\
	\mathtt{C} &\rightarrow \mathtt{1C0|\epsilon}
\end{align}
$$
$$
\begin{align}
	\mathtt{S} &\rightarrow \mathtt{A}\\
	\mathtt{A} &\rightarrow \mathtt{B|C|\epsilon}\\
	\mathtt{B} &\rightarrow \mathtt{0B1|01}\checkmark\\
	\mathtt{C} &\rightarrow \mathtt{1C0|\epsilon}
\end{align}
$$
$$
\begin{align}
	\mathtt{S} &\rightarrow \mathtt{A|\epsilon}\\
	\mathtt{A} &\rightarrow \mathtt{B|C}\checkmark\\
	\mathtt{B} &\rightarrow \mathtt{0B1|01}\checkmark\\
	\mathtt{C} &\rightarrow \mathtt{1C0|\epsilon}
\end{align}
$$

$$
\begin{align}
	\mathtt{S} &\rightarrow \mathtt{A|\epsilon}\\
	\mathtt{A} &\rightarrow \mathtt{B|C}\checkmark\\
	\mathtt{B} &\rightarrow \mathtt{0B1|01}\checkmark\\
	\mathtt{C} &\rightarrow \mathtt{1C0|10}\checkmark
\end{align}
$$

3.
$$
\begin{align}
	\mathtt{S} &\rightarrow \mathtt{\mathtt{0B1|01|1C0|10}|\epsilon}\\
	\mathtt{A} &\rightarrow \mathtt{0B1|01|1C0|10}\\
	\mathtt{B} &\rightarrow \mathtt{0B1|01}\\
	\mathtt{C} &\rightarrow \mathtt{1C0|10}
\end{align}
$$

4.
$$
\begin{align}
	\mathtt{S} &\rightarrow \mathtt{\mathtt{0B1|01|1C0|10}|\epsilon}\\
	\mathtt{A} &\rightarrow \mathtt{0B1|01|1C0|10}\\
	\mathtt{B} &\rightarrow \mathtt{0B1|01}\\
	\mathtt{C} &\rightarrow \mathtt{1C0|10}\\
	\mathtt{N_1} &\rightarrow \mathtt{B1}\\
	\mathtt{M_1} &\rightarrow \mathtt{0}
\end{align}
$$




4 ex)
$$
\begin{align}
	\mathtt{V} &\rightarrow x_1x_2x_3\dots x_k\\
	\mathtt{BECOMES}\\
	\mathtt{V} &\rightarrow x_1N_1\\
	\mathtt{N_1} &\rightarrow \mathtt{0B1|01}\\
	\mathtt{N_2} &\rightarrow \mathtt{1C0|10}
\end{align}
$$



DEF (summarized Chomsky Normal Form):
allowed rules like


$A\rightarrow BC$ or $A\rightarrow a$
where BC are not start variables
and the start variable can be empty string

THEOREM:
Any CFL can be generated by a CFG in Chomsky Normal Form


*The proof introduces things that are not allowed in Chomsky Normal Form but we deal with it later*

PROOF:
Supposed A is a CFL and let G be a CFG that generates A.

Add $S_0$ a new start variable along with the rule $S_0\rightarrow S$ Where S is G's start variable.

Next, remove $\epsilon$ rules of the form $A\rightarrow \epsilon$ when A is not $S_0$.

For $R\rightarrow uAv$, add $R\rightarrow uv$ 
For $R \rightarrow uAvAw$,add $R\rightarrow uvAw$, $R\rightarrow uAvw$, and $R\rightarrow uvu$.
For $R\rightarrow A$, add $R\rightarrow \epsilon$ unless it had previously been removed. **Otherwise you would get an infinite loop**

Repeat until all $\epsilon$ rules have been removed.

Next, we remove all unit rules $A\rightarrow B$.
If $B\rightarrow u$, add $A\rightarrow u$ unless this was a unit rule previously removed.

Repeat until there are no unit rules.

Replace $A\rightarrow u_1u_2u_3\dots u_k$ with 
$A\rightarrow u_1N_1$
$N_1\rightarrow u_2N_2$
$N_2\rightarrow u_3N_3$
$N_{k-3}\rightarrow u_{k-2}N_{k-2}$
$N_{k-2}\rightarrow u_{k-1}u_{k}$

Replace any terminal $u_i$ in the preceding rules with a new variable $U_i\rightarrow u_i$



DEF:
A pushdown autamaton (PDA) is 6-tuple $(Q,\Sigma,\delta,q_0,F)$
where $Q,\Sigma,$ are finite sets and
- $Q$ is the set of states
- $\Sigma$ is the input alphabet,
- handman looking symbol is the stack alphabet,
- $\delta:Q\times (\Sigma \cup \{\epsilon\}) \times (hangman\cup \{\epsilon\}) \rightarrow powerset (Q\times (hangman \cup \{\epsilon\}))$ is the transition function
- $q_0 \elementof Q$ is the start state, and
- $F \subset Q$ is the set of accept states
- 